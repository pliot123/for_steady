마법사 상어와 토네이도 성공

 
시간 제한메모리 제한제출정답맞힌 사람정답 비율
1 초	512 MB	4768	3427	2252	70.951%
문제
마법사 상어가 토네이도를 배웠고, 오늘은 토네이도를 크기가 N×N인 격자로 나누어진 모래밭에서 연습하려고 한다. 위치 (r, c)는 격자의 r행 c열을 의미하고, A[r][c]는 (r, c)에 있는 모래의 양을 의미한다.

토네이도를 시전하면 격자의 가운데 칸부터 토네이도의 이동이 시작된다. 토네이도는 한 번에 한 칸 이동한다. 다음은 N = 7인 경우 토네이도의 이동이다.


토네이도가 한 칸 이동할 때마다 모래는 다음과 같이 일정한 비율로 흩날리게 된다.


토네이도가 x에서 y로 이동하면, y의 모든 모래가 비율과 α가 적혀있는 칸으로 이동한다. 비율이 적혀있는 칸으로 이동하는 모래의 양은 y에 있는 모래의 해당 비율만큼이고, 계산에서 소수점 아래는 버린다. α로 이동하는 모래의 양은 비율이 적혀있는 칸으로 이동하지 않은 남은 모래의 양과 같다. 모래가 이미 있는 칸으로 모래가 이동하면, 모래의 양은 더해진다. 위의 그림은 토네이도가 왼쪽으로 이동할 때이고, 다른 방향으로 이동하는 경우는 위의 그림을 해당 방향으로 회전하면 된다.

토네이도는 (1, 1)까지 이동한 뒤 소멸한다. 모래가 격자의 밖으로 이동할 수도 있다. 토네이도가 소멸되었을 때, 격자의 밖으로 나간 모래의 양을 구해보자.

입력
첫째 줄에 격자의 크기 N이 주어진다. 둘째 줄부터 N개의 줄에는 격자의 각 칸에 있는 모래가 주어진다. r번째 줄에서 c번째 주어지는 정수는 A[r][c] 이다.

출력
격자의 밖으로 나간 모래의 양을 출력한다.

제한
3 ≤ N ≤ 499
N은 홀수
0 ≤ A[r][c] ≤ 1,000
가운데 칸에 있는 모래의 양은 0
예제 입력 1 복사
5
0 0 0 0 0
0 0 0 0 0
0 10 0 0 0
0 0 0 0 0
0 0 0 0 0
예제 출력 1 복사
10
예제 입력 2 복사
5
0 0 0 0 0
0 0 0 0 0
0 100 0 0 0
0 0 0 0 0
0 0 0 0 0
예제 출력 2 복사
85
예제 입력 3 복사
7
1 2 3 4 5 6 7
1 2 3 4 5 6 7
1 2 3 4 5 6 7
1 2 3 0 5 6 7
1 2 3 4 5 6 7
1 2 3 4 5 6 7
1 2 3 4 5 6 7
예제 출력 3 복사
139
예제 입력 4 복사
5
100 200 300 400 200
300 243 432 334 555
999 111 0 999 333
888 777 222 333 900
100 200 300 400 500
예제 출력 4 복사
7501
예제 입력 5 복사
5
0 0 100 0 0
0 0 100 0 0
0 0 0 0 0
0 0 100 0 0
0 0 100 0 0
예제 출력 5 복사
283
예제 입력 6 복사
9
193 483 223 482 858 274 847 283 748
484 273 585 868 271 444 584 293 858
828 384 382 818 347 858 293 999 727
818 384 727 373 636 141 234 589 991
913 564 555 827 0 999 123 123 123
321 321 321 983 982 981 983 980 990
908 105 270 173 147 148 850 992 113
943 923 982 981 223 131 222 913 562
752 572 719 590 551 179 141 137 731
예제 출력 6 복사
22961





토네이도는 항상 맨 중간에서 시작해
그럼 Map[N/2][N/2]부터 시작한다.
맵의 크기는 499 x 499
1.1까지오면 토네이도가 소멸한다
그럼 나는 0을 1로 쓰니까 
Map[0][0]에 이동하면 토네이도가 사라진다

토네이도는 이동하면서 목적지로 가면 목적지에 있던 모래가 앞으로 한칸 밀려가고
주변으로 모래가 촤라락 뿌려지는 그런 구조인거 같다.

토네이도랑 모래이동을 따로 구현해주는게 편해보인다


#include<iostream>
using namespace std;
int N;
int Map[500][500];

int dy[4] = {0,1,0,-1};
int dx[4] = {-1,0,1,0};
int answer;
int spreadY[4][10] = { { -1,1,-1,1,-1,1,-2,2,0,0 },
					   { -1,-1,0,0,1,1,0,0,2,1 },
					   { -1,1,-1,1,-1,1,-2,2,0,0 },
					   { 1,1,0,0,-1,-1,0,0,-2,-1 } };


int spreadX[4][10] = { { 1,1,0,0,-1,-1,0,0,-2,-1 },
					   { -1,1,-1,1,-1,1,-2,2,0,0 },
					   { -1,-1,0,0,1,1,0,0,2,1 },
					   { -1,1,-1,1,-1,1,-2,2,0,0 } };

int SandPercent[9] = { 1,1,7,7,10,10,2,2,5 };


void push(int y, int x, int dir) {
	int sand = Map[y][x];
	int tmp = sand;
	for (int i = 0; i < 9; i++) {
		int ny = y + spreadY[dir][i];
		int nx = x + spreadX[dir][i];
		int per = SandPercent[i];
		int weight = (tmp * per) / 100;

		if (ny < 0 || ny >= N || nx < 0 || nx >= N)
			answer += weight;
		else 
			Map[ny][nx] += weight;

		sand -= weight;
	}

	int ny = y + spreadY[dir][9];
	int nx = x + spreadX[dir][9];

	if (ny < 0 || ny >= N || nx < 0 || nx >= N)
		answer += sand;
	else
		Map[ny][nx] += sand;

	Map[y][x] = 0;

}

void tonado() {
	int y = N/2, x = N / 2;
	int curve = 1;
	int dir = 0;
	while (1) {

		for (int i = 0; i < curve; i++) {
			y += dy[dir], x += dx[dir];
			//if(Map[y][x]>0)
				push(y,x,dir);
			//cout << "Y와 X는 " << y << ' ' << x << endl;
			if (y == 0 && x == 0)break;
		}
		if (y == 0 && x == 0)break;
		dir = (dir + 1) % 4;


		for (int i = 0; i < curve; i++) {
			y += dy[dir], x += dx[dir];
			//if (Map[y][x] > 0)//시간단축용
				push(y, x, dir);
			//cout << "Y와 X는 " << y << ' ' << x << endl;
			if (y == 0 && x == 0)break;
		}
		if (y == 0 && x == 0)break;
		dir = (dir + 1) % 4;

		curve++;
	}
}



int main() {
	cin >> N;
	for (int i = 0; i < N; i++)
		for (int j = 0; j < N; j++)
			cin >> Map[i][j];
	tonado();
	cout << answer;
	return 0;
}
어려운 개념은 없는데

int spreadY[4][10] = { { -1,1,-1,1,-1,1,-2,2,0,0 },
   { -1,-1,0,0,1,1,0,0,2,1 },
   { -1,1,-1,1,-1,1,-2,2,0,0 },
   { 1,1,0,0,-1,-1,0,0,-2,-1 } };


int spreadX[4][10] = { { 1,1,0,0,-1,-1,0,0,-2,-1 },
   { -1,1,-1,1,-1,1,-2,2,0,0 },
   { -1,-1,0,0,1,1,0,0,2,1 },
   { -1,1,-1,1,-1,1,-2,2,0,0 } };

int SandPercent[9] = { 1,1,7,7,10,10,2,2,5 };


 이거 맞춰서 만드는게 짜증난다

근데 맞추고 돌리면 쾌감이 좋다
